	.ORIG	x2000
	ST	R0,SAVER0
	ST	R1,SAVER1
	ST	R2,SAVER2

	LDI	R0,KBDR		
	LD	R2,COUNT2	;output the character for 10 times
START1	LDI	R1,DSR
	BRzp	START1
	STI	R0,DDR		;write the character
	ADD	R2,R2,#-1	
	BRp	START1
START2  LDI	R1,DSR		
	BRzp    START2
	LD	R0,NL
	STI	R0,DDR		;NewLine

	ADD	R5,R5,#0	;change the flag
	BRz	C
	BRp	D
C	ADD	R5,R5,#1	
	BR	FIN		
D	ADD	R5,R5,#-1

FIN	LD	R0,SAVER0
	LD	R1,SAVER1
	LD	R2,SAVER2
	RTI

NL	.FILL	x000D
KBDR	.FILL	xFE02
DSR	.FILL	xFE04
DDR	.FILL	xFE06
COUNT2	.FILL	#10
SAVER0	.BLKW	1
SAVER1	.BLKW	1
SAVER2	.BLKW	1
	.END